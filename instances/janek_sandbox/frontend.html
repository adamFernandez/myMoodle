<script>
	// loads in icons to use in HTML
	loadCSS("https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/assets/fonts/ELCicons/css/ELCicons.css");


	var LOCAL = "frontend.css"
	var DEVELOPMENT = "https://rawgit.com/qwerty1829/moodle-frontend/master/instances/janek_sandbox/frontend.css";
	var PRODUCTION = "https://cdn.rawgit.com/qwerty1829/moodle-frontend/master/frontend.css";
	loadCSS(DEVELOPMENT);

	loadCSS("https://fonts.googleapis.com/css?family=Open+Sans");

	function loadCSS(url){
		console.log(url);
		var head = document.getElementsByTagName('head')[0],
   		link = document.createElement('link');
		link.type = 'text/css';
   		link.rel = 'stylesheet';
   		link.href = url;
   		head.appendChild(link);
   		return link;
	}

</script>
<script src='https://rawgit.com/qwerty1829/moodle-frontend/master/functions.js' type="text/javascript"></script>
<script>
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/core/1471328846/f/html-24", "a"); // page
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/data/1471328846/icon", "j"); // 3 blocks on head
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/forum/1471328846/icon", "bus");  // messaging
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/choice/1471328846/icon", "umbrella");
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/assign/1471328846/icon", "phone"); 
	 replaceFileIconsByUrl("https://keats.kcl.ac.uk/theme/image.php/keats/workshop/1471328846/icon", "homew");

	 addProgressBar();

function addProgressBar() {
	var numElements = $(".progressBarCell").size();
	var completedElements = 0;
	console.log(numElements);
		$(".progressBarCell").each(function(index) {
			if($(this).css("background-color") == "rgb(115, 168, 57)") {
				completedElements++;
			}
			$(this).css("background-color","transparent");
			// $(this).css("background","url('https://keats.kcl.ac.uk/pluginfile.php/2038040/mod_resource/content/3/hank.png')");
		});
		var percentComplete = (completedElements/numElements)*160 + '%';
		var summaryProgress = $("<div class='summary-progress'></div>");
		$(".summary").append(summaryProgress);
		var progress = $("<img class='summary-progress-icon' src='https://rawgit.com/qwerty1829/moodle-frontend/master/assets/images/progress_bus.png'/>");
		$(".summary-progress").append(progress);

		$(".summary-progress").css('position','relative');
		$(".summary-progress").css("background-image","url('https://rawgit.com/qwerty1829/moodle-frontend/master/assets/images/progress_bg.jpg')")
		$(".summary-progress").css("height",120);
		$(".summary-progress").css("background-size","contain");
		$(".summary-progress-icon").css('position','absolute');
}	 
</script>